<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: client/core.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: client/core.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
let sogedesApp = angular.module('sogedesApp', []);
let tableRows = [];


/**
* @description Angular main controller (communicate with html index)
* @param $scope Html scope abstraction from angular
* @param $http  Http abstraction 
* @returns void
* @author Bruno Carvalho
*/
function mainController($scope, $http) {

    $scope.tableRows = [];         //the table 
    $scope.isTableVisible = false; //controls the elements that are visible in the page

    // when the get button is pressed, get json file from API
    $scope.getDirectories = function () {
        $http.get('/server/public/directories')
            .success(function (data) {
                
                parseJsonToTable(data);       //parse json to table structure  
                $scope.tableRows = tableRows; //after parsing, the html table receive the data
                $scope.isTableVisible = true; //now table is visible, so the button is set invisible
                console.log(data);

            })
            .error(function (data) {
                console.log('Error: ' + data);
            });
    };
}

/**
* @description Read the json data and organize it as table rows
* @param data Json data from directory.json file
* @returns void
* @author Bruno Carvalho
*/
function parseJsonToTable(data) {

    data.data.directory.forEach(directory => {

        let keys = Object.keys(directory);
        let level1dir = keys[0];

        directory[keys[0]].forEach(subdirectory => {

            let keys = Object.keys(subdirectory);
            let level2dir = keys[0];

            subdirectory[keys[0]].forEach(name => {
                let keys = Object.keys(name);

                setTableRow(level1dir, level2dir, keys[0], name[keys[0]].date,
                            name[keys[0]].type,  name[keys[0]].changed,  name[keys[0]].size);

            });
        });
    });
    console.log(tableRows);
}


/**
* @description Create a tableRow object and push it to the tableRows array
* @param level1dir Level 1: the name of the first child of the object directory
* @param level2dir Level 2: the name of second child of the object directory
* @param nameStr Name: the name of third child of the object directory
* @param dateStr Date: attribute of the object level 3
* @param typeStr Type: attribute of the object level 3
* @param changedStr Changed: attribute of the object level 3
* @param sizeStr Size: attribute of the object level 3
* @returns void
* @author Bruno Carvalho
*/
function setTableRow(level1dir, level2dir, nameStr, dateStr, typeStr,changedStr,sizeStr) {

    let tableRow = {
        l1: level1dir,
        l2: level2dir,
        name: nameStr,
        date: dateStr,
        type: typeStr,
        change: changedStr,
        size: sizeStr
    }
    tableRows.push(tableRow);
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#BaseServer">BaseServer</a></li><li><a href="global.html#mainController">mainController</a></li><li><a href="global.html#parseJsonToTable">parseJsonToTable</a></li><li><a href="global.html#Server">Server</a></li><li><a href="global.html#setTableRow">setTableRow</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.1</a> on Wed May 08 2019 16:49:21 GMT-0300 (-03)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
